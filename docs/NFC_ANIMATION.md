# NFCæ„Ÿåº”åŠ¨ç”»è®¾è®¡æ–‡æ¡£

ç‰ˆæœ¬: v2.5
åŠŸèƒ½: VIPæŸ¥è¯¢é¡µé¢ - NFCåˆ·å¡æç¤ºåŠ¨ç”»

---

## ğŸ¯ è®¾è®¡ç›®æ ‡

å°†åŸæ¥çš„ç®€å•åœ†åœˆåŠ¨ç”»æ”¹ä¸ºä¸“ä¸šçš„NFCæ„Ÿåº”å›¾æ ‡,ç›´è§‚å±•ç¤º:
- NFCæ ‡ç­¾çš„ç‰©ç†å½¢æ€ (æ¤­åœ†å¡ç‰‡)
- æ— çº¿ä¿¡å·çš„ä¼ è¾“è¿‡ç¨‹ (æ³¢çº¹æ‰©æ•£)
- ç”¨æˆ·æ“ä½œæç¤º (æ‰‹åŠ¿å›¾æ ‡)

---

## ğŸ¨ ç•Œé¢æ•ˆæœ

### ä¼˜åŒ–å‰ (ç®€å•åœ†åœˆåŠ¨ç”»)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      VIP INFO           â”‚
â”‚                         â”‚
â”‚         â—¯              â”‚ â† 3ä¸ªæ‰©æ•£åœ†åœˆ
â”‚        â—¯ â—¯             â”‚
â”‚       â—¯   â—¯            â”‚
â”‚                         â”‚
â”‚    Tap VIP Card         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¼˜åŒ–å (NFCæ„Ÿåº”å›¾æ ‡)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      VIP INFO           â”‚
â”‚                         â”‚
â”‚     â•­â”€â•®                â”‚
â”‚    â”‚)))â”‚ ))) âœ‹        â”‚ â† NFCæ ‡ç­¾ + æ³¢çº¹ + æ‰‹
â”‚     â•°â”€â•¯                â”‚
â”‚                         â”‚
â”‚    Tap VIP Card         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠ¨ç”»å…ƒç´ **:
- `â•­â”€â•®`: NFCæ ‡ç­¾æ¤­åœ† (å†…å«ä¸‰æ¡æ³¢çº¹çº¿)
- `)))`: æ— çº¿ä¿¡å·æ³¢çº¹ (ä»å·¦å‘å³æ‰©æ•£)
- `âœ‹`: æ‰‹åŠ¿å›¾æ ‡ (æç¤ºé è¿‘æ“ä½œ)
- `Tap VIP Card`: åº•éƒ¨æç¤ºæ–‡å­—

---

## ğŸ”§ æŠ€æœ¯å®ç°

### æ–‡ä»¶ä½ç½®
**[GoldSky_Display.ino](GoldSky_Display.ino#L241-L299)**

### æ ¸å¿ƒç»„ä»¶

#### 1. NFCæ ‡ç­¾æ¤­åœ†
```cpp
// ä½ç½®: å±å¹•ä¸­å¿ƒå·¦ä¾§20åƒç´ 
int tagCenterX = centerX - 20;
int tagCenterY = centerY;

// ç»˜åˆ¶æ¤­åœ† (å®½12, é«˜18)
display.drawEllipse(tagCenterX, tagCenterY, 12, 18, U8G2_DRAW_ALL);

// æ¤­åœ†å†…çš„ä¸‰æ¡æ³¢çº¹çº¿ (æ¨¡æ‹ŸNFCçº¿åœˆ)
display.drawLine(tagCenterX - 6, tagCenterY - 6, tagCenterX - 6, tagCenterY + 6);
display.drawLine(tagCenterX - 2, tagCenterY - 8, tagCenterX - 2, tagCenterY + 8);
display.drawLine(tagCenterX + 2, tagCenterY - 6, tagCenterX + 2, tagCenterY + 6);
```

**å‚æ•°**:
- æ¤­åœ†å®½åº¦: 12åƒç´  (åŠå¾„)
- æ¤­åœ†é«˜åº¦: 18åƒç´  (åŠå¾„)
- æ³¢çº¹çº¿æ•°é‡: 3æ¡
- æ³¢çº¹çº¿é—´è·: 4åƒç´ 

---

#### 2. æ— çº¿ä¿¡å·æ³¢çº¹åŠ¨ç”»
```cpp
// åŠ¨ç”»å¸§ (400ms/å¸§, 0-2å¾ªç¯)
unsigned long now = millis();
int animFrame = (now / 400) % 3;

// ç»˜åˆ¶3å±‚æ‰©æ•£æ³¢çº¹
for(int i = 0; i < 3; i++) {
    if(i <= animFrame) {
        int waveRadius = 6 + (i * 2);  // åŠå¾„: 6, 8, 10

        // ç»˜åˆ¶å³ä¾§åŠåœ†å¼§
        display.drawCircle(tagCenterX + 15, tagCenterY, waveRadius,
                          U8G2_DRAW_UPPER_RIGHT | U8G2_DRAW_LOWER_RIGHT);
    }
}
```

**å‚æ•°**:
- åŠ¨ç”»é€Ÿåº¦: 400ms/å¸§
- æ³¢çº¹å±‚æ•°: 3å±‚
- èµ·å§‹åŠå¾„: 6åƒç´ 
- åŠå¾„å¢é‡: 2åƒç´ /å±‚
- æ³¢çº¹æ–¹å‘: å³ä¾§åŠåœ† (æœå‘æ‰‹åŠ¿)

**åŠ¨ç”»æ•ˆæœ**:
```
å¸§0: (  ))                 (ç¬¬1å±‚)
å¸§1: ( )))                (ç¬¬1,2å±‚)
å¸§2: ())))                (ç¬¬1,2,3å±‚)
```

---

#### 3. æ‰‹åŠ¿å›¾æ ‡
```cpp
// ä½ç½®: å±å¹•ä¸­å¿ƒå³ä¾§25åƒç´ 
int handX = centerX + 25;
int handY = centerY;

// æ‰‹æŒ (çŸ©å½¢ 10x16)
display.drawFrame(handX, handY - 8, 10, 16);

// æ‰‹æŒ‡ (ä¸‰æ¡çŸ­çº¿)
display.drawLine(handX + 2, handY - 8, handX + 2, handY - 12);  // çŸ­æŒ‡
display.drawLine(handX + 5, handY - 8, handX + 5, handY - 13);  // ä¸­æŒ‡ (æœ€é•¿)
display.drawLine(handX + 8, handY - 8, handX + 8, handY - 12);  // çŸ­æŒ‡
```

**å‚æ•°**:
- æ‰‹æŒå¤§å°: 10Ã—16åƒç´ 
- æ‰‹æŒ‡æ•°é‡: 3æ ¹ (ç®€åŒ–)
- ä¸­æŒ‡é•¿åº¦: 5åƒç´  (æœ€é•¿)
- ä¸¤ä¾§æ‰‹æŒ‡: 4åƒç´ 

**ç®€åŒ–è®¾è®¡**:
- çœç•¥æ‹‡æŒ‡å’Œå°æŒ‡ (ç©ºé—´é™åˆ¶)
- ä»…ä¿ç•™æ ¸å¿ƒæ‰‹åŠ¿è½®å»“

---

### å¸ƒå±€åæ ‡

```
æ˜¾ç¤ºåŒºåŸŸ: 127 Ã— 53 åƒç´  (å¯è§†çª—å£)

Y=6   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                             â”‚
Y=17  â”‚      VIP INFO               â”‚ â† æ ‡é¢˜
      â”‚                             â”‚
Y=32  â”‚    â•­â”€â•®  )))  âœ‹            â”‚ â† åŠ¨ç”»å±‚
      â”‚   â”‚)))â”‚                    â”‚
      â”‚    â•°â”€â•¯                     â”‚
      â”‚    â”‚    â”‚    â”‚              â”‚
      â”‚   NFC  æ³¢çº¹  æ‰‹             â”‚
      â”‚  (X=44)(X=59)(X=89)        â”‚
      â”‚                             â”‚
Y=55  â”‚    Tap VIP Card             â”‚ â† æç¤º
Y=59  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åæ ‡è¯´æ˜:
- centerX = 64 (å±å¹•ä¸­å¿ƒX)
- centerY = 32 (å±å¹•ä¸­å¿ƒY)
- tagCenterX = 44 (NFCæ ‡ç­¾X)
- handX = 89 (æ‰‹åŠ¿å›¾æ ‡X)
- æ³¢çº¹èµ·ç‚¹X = 59
```

---

## âš™ï¸ åŠ¨ç”»å‚æ•°é…ç½®

### åŠ¨ç”»é€Ÿåº¦
```cpp
int animFrame = (now / 400) % 3;  // åŠ¨ç”»é—´éš”
```

**æ¨èå€¼**:
- å¿«é€Ÿ: 300ms (æ›´å¼•äººæ³¨æ„)
- æ­£å¸¸: 400ms (å½“å‰)
- æ…¢é€Ÿ: 500ms (æ›´èˆ’ç¼“)

### NFCæ ‡ç­¾å¤§å°
```cpp
display.drawEllipse(tagCenterX, tagCenterY, 12, 18, U8G2_DRAW_ALL);
```

**å¯è°ƒæ•´**:
- å°å°ºå¯¸: (10, 15) - æ›´ç´§å‡‘
- æ­£å¸¸: (12, 18) - å½“å‰
- å¤§å°ºå¯¸: (14, 20) - æ›´é†’ç›®

### æ³¢çº¹æ‰©æ•£èŒƒå›´
```cpp
int waveRadius = 6 + (i * 2);  // èµ·å§‹åŠå¾„ + å¢é‡
```

**å¯è°ƒæ•´**:
- å¯†é›†æ³¢çº¹: èµ·å§‹4, å¢é‡1.5
- æ­£å¸¸: èµ·å§‹6, å¢é‡2 (å½“å‰)
- ç¨€ç–æ³¢çº¹: èµ·å§‹8, å¢é‡3

---

## ğŸ¬ åŠ¨ç”»æ—¶é—´è½´

```
æ—¶é—´è½´ (1.2ç§’å¾ªç¯):

0ms     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        â•­â”€â•®  )   âœ‹
       â”‚)))â”‚
        â•°â”€â•¯

400ms   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        â•­â”€â•®  ))  âœ‹
       â”‚)))â”‚
        â•°â”€â•¯

800ms   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        â•­â”€â•®  ))) âœ‹
       â”‚)))â”‚
        â•°â”€â•¯

1200ms  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        (å¾ªç¯å›åˆ°ç¬¬ä¸€å¸§)
```

---

## ğŸ’¾ å†…å­˜ä½¿ç”¨

**é™æ€å˜é‡**: æ—  (ä½¿ç”¨ä¸´æ—¶å˜é‡)

**æ ˆå˜é‡** (ä¸´æ—¶):
- `animFrame`: 4å­—èŠ‚
- åæ ‡å˜é‡: ~20å­—èŠ‚
- å¾ªç¯å˜é‡: 4å­—èŠ‚

**æ€»å†…å­˜å¼€é”€**: <30å­—èŠ‚ (å¯å¿½ç•¥)

---

## ğŸ¯ è®¾è®¡ç†å¿µ

### ä¸ºä»€ä¹ˆç”¨NFCå›¾æ ‡?
1. **è¡Œä¸šæ ‡å‡†**: ç¬¦åˆå…¨çƒé€šç”¨çš„NFCæ„Ÿåº”æ ‡è¯†
2. **ç›´è§‚æ€§**: ç”¨æˆ·ç«‹å³ç†è§£éœ€è¦"é è¿‘"å¡ç‰‡
3. **ä¸“ä¸šæ€§**: æå‡è®¾å¤‡çš„ç°ä»£æ„Ÿ
4. **æ•™è‚²æ€§**: å¸®åŠ©æ–°ç”¨æˆ·ç†è§£NFCæŠ€æœ¯

### ä¸ºä»€ä¹ˆç”¨æ³¢çº¹åŠ¨ç”»?
1. **åŠ¨æ€æ„Ÿ**: æ¯”é™æ€å›¾æ ‡æ›´å¸å¼•æ³¨æ„
2. **ä¼ è¾“å¯è§†åŒ–**: å±•ç¤ºæ— çº¿ä¿¡å·ä¼ è¾“è¿‡ç¨‹
3. **å¼•å¯¼æ€§**: æ³¢çº¹æ–¹å‘æŒ‡å‘æ“ä½œç‚¹ (æ‰‹åŠ¿)
4. **è¶£å‘³æ€§**: å¢åŠ ç”¨æˆ·ä½“éªŒçš„æ„‰æ‚¦æ„Ÿ

### ä¸ºä»€ä¹ˆç”¨æ‰‹åŠ¿å›¾æ ‡?
1. **æ“ä½œæç¤º**: æ˜ç¡®å‘Šè¯‰ç”¨æˆ·éœ€è¦"é è¿‘"
2. **ç©ºé—´æ„Ÿ**: æ³¢çº¹ä»å¡ç‰‡åˆ°æ‰‹,å±•ç¤ºè·ç¦»å…³ç³»
3. **é€šç”¨æ€§**: æ‰‹åŠ¿æ˜¯å…¨çƒé€šç”¨è¯­è¨€
4. **ç®€æ´æ€§**: ç®€åŒ–çš„æ‰‹å½¢èŠ‚çœåƒç´ ç©ºé—´

---

## ğŸ”„ UI/UXä¼˜åŠ¿

### å¯¹æ¯”æ—§ç‰ˆåœ†åœˆåŠ¨ç”»
| æ–¹é¢ | æ—§ç‰ˆ (åœ†åœˆ) | æ–°ç‰ˆ (NFCå›¾æ ‡) |
|------|-------------|----------------|
| **è¯†åˆ«æ€§** | æŠ½è±¡ | å…·è±¡ (NFCæ ‡å‡†) |
| **ä¿¡æ¯é‡** | å•ä¸€ | ä¸°å¯Œ (å¡+ä¿¡å·+æ‰‹) |
| **å¼•å¯¼æ€§** | å¼± | å¼º (æ–¹å‘æ˜ç¡®) |
| **ä¸“ä¸šæ€§** | ä¸€èˆ¬ | é«˜ (è¡Œä¸šæ ‡å‡†) |

### ç”¨æˆ·ä½“éªŒæå‡
- âœ… é¦–æ¬¡ä½¿ç”¨ç”¨æˆ·ç«‹å³ç†è§£æ“ä½œ
- âœ… å‡å°‘"ä¸çŸ¥é“æ€ä¹ˆåˆ·å¡"çš„å›°æƒ‘
- âœ… æå‡è®¾å¤‡çš„ç°ä»£åŒ–å°è±¡
- âœ… ç¬¦åˆéæ¥è§¦æ”¯ä»˜çš„ç”¨æˆ·ä¹ æƒ¯

---

## ğŸ§ª æµ‹è¯•è¦ç‚¹

### è§†è§‰æµ‹è¯•
- [ ] æ³¢çº¹åŠ¨ç”»æµç•…æ— å¡é¡¿
- [ ] æ¤­åœ†å’Œæ³¢çº¹æ— é‡å 
- [ ] æ‰‹åŠ¿å›¾æ ‡ä½ç½®åˆç†
- [ ] æ–‡å­—ä¸ä¸å›¾æ ‡å†²çª

### æ€§èƒ½æµ‹è¯•
- [ ] åŠ¨ç”»å¸§ç‡ç¨³å®š (>10fps)
- [ ] æ— æ˜æ˜¾é—ªçƒ
- [ ] CPUå ç”¨æ­£å¸¸ (<10%)

### å¯è¯»æ€§æµ‹è¯•
- [ ] ä¸åŒäº®åº¦ä¸‹æ¸…æ™°å¯è§
- [ ] å¿«é€Ÿæ‰«è§†å¯è¯†åˆ«å›¾æ ‡æ„å›¾
- [ ] æç¤ºæ–‡å­—æ˜“è¯»

---

## ğŸ¨ ASCIIè‰ºæœ¯é¢„è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       VIP INFO              â”‚
â”‚                             â”‚
â”‚      â•­â”€â”€â”€â•®                 â”‚
â”‚     â”‚ ) ) )â”‚  )))  âœ‹       â”‚
â”‚      â•°â”€â”€â”€â•¯                 â”‚
â”‚       NFC    æ³¢çº¹   æ‰‹      â”‚
â”‚                             â”‚
â”‚     Tap VIP Card            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å›¾ä¾‹:
  â•­â”€â”€â”€â•®   : NFCæ ‡ç­¾æ¤­åœ†
  ) ) )   : æ¤­åœ†å†…æ³¢çº¹çº¿ (æ¨¡æ‹ŸNFCçº¿åœˆ)
  )))     : æ— çº¿ä¿¡å·æ‰©æ•£ (3å±‚æ³¢çº¹)
  âœ‹       : æ‰‹åŠ¿å›¾æ ‡ (é è¿‘æç¤º)
```

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### æ³¢çº¹ä¸æ˜¾ç¤º
- æ£€æŸ¥ `U8G2_DRAW_UPPER_RIGHT | U8G2_DRAW_LOWER_RIGHT` å‚æ•°
- ç¡®è®¤ U8g2 åº“ç‰ˆæœ¬æ”¯æŒ drawCircle å‚æ•°

### æ¤­åœ†å˜å½¢
- éªŒè¯ `drawEllipse()` å‚æ•°é¡ºåº (ä¸­å¿ƒX, ä¸­å¿ƒY, åŠå¾„X, åŠå¾„Y)
- æ£€æŸ¥æ˜¾ç¤ºåŒºåŸŸæ˜¯å¦è¶³å¤Ÿå¤§

### åŠ¨ç”»å¡é¡¿
- é™ä½åŠ¨ç”»é€Ÿåº¦ (400ms â†’ 500ms)
- å‡å°‘æ³¢çº¹å±‚æ•° (3 â†’ 2)

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [UI_ENHANCEMENT_V2.5.md](UI_ENHANCEMENT_V2.5.md) - UIä¼˜åŒ–æ€»ç»“
- [GoldSky_Display.ino](GoldSky_Display.ino) - æ˜¾ç¤ºå‡½æ•°å®ç°
- [GEAR_ANIMATION.md](GEAR_ANIMATION.md) - é½¿è½®åŠ¨ç”»æ–‡æ¡£

---

## ğŸ‰ æ€»ç»“

NFCæ„Ÿåº”å›¾æ ‡ç›¸æ¯”ç®€å•åœ†åœˆåŠ¨ç”»:
- âœ… æ›´ç›´è§‚çš„æ“ä½œæç¤º
- âœ… æ›´ä¸“ä¸šçš„è§†è§‰è®¾è®¡
- âœ… æ›´ç¬¦åˆè¡Œä¸šæ ‡å‡†
- âœ… æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ

å†…å­˜å¼€é”€æå° (<30å­—èŠ‚),æ€§èƒ½å½±å“å¯å¿½ç•¥,æ˜¯ä¸€ä¸ªä½æˆæœ¬é«˜æ”¶ç›Šçš„UIä¼˜åŒ–ã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-11-07
**çŠ¶æ€**: âœ… å·²å®ç°,å¾…æµ‹è¯•
