# 显示区域和边框配置指南

GoldSky_Lite v2.4.3 - 2.42" OLED 显示优化

---

## 📋 配置文件位置

所有配置在 `config.h` 中：

```cpp
// =================== 显示区域配置 ===================
// 显示区域比例 (用于适配遮挡罩子)
#define DISPLAY_AREA_PERCENT 80  // 80% 可见区域

// 边框样式 (0=无边框, 1=单线, 2=双线, 3=圆角)
#define BORDER_STYLE 0  // 无边框
```

---

## 🎨 显示区域配置

### 1. `DISPLAY_AREA_PERCENT` - 可见区域百分比

根据您的遮挡罩子实际情况选择：

| 配置值 | 可见区域 | 边距 | 适用场景 |
|--------|---------|------|---------|
| `100` | 128x64 全屏 | 无边距 | 无遮挡罩子 |
| `95` | 121x61 | 上下左右各 3-4px | 轻微遮挡（1-2mm） |
| `90` | 115x58 | 上下左右各 6-7px | 中等遮挡（3-5mm） |
| `85` | 109x54 | 上下左右各 9-10px | 较多遮挡（6-8mm） |
| **`80`** | **102x51** | **上下左右各 13px** | **推荐：较多遮挡（9-12mm）** |
| `75` | 96x48 | 上下左右各 16px | 严重遮挡（13mm+） |
| `70` | 90x45 | 上下左右各 19px | 极端遮挡 |

### 📐 计算公式

```
可见宽度 = 128 × (DISPLAY_AREA_PERCENT / 100)
可见高度 = 64 × (DISPLAY_AREA_PERCENT / 100)
左右边距 = (128 - 可见宽度) / 2
上下边距 = (64 - 可见高度) / 2
```

### 🔧 调整步骤

1. **测量罩子遮挡距离**
   - 用尺子测量罩子遮挡屏幕边缘的距离（上下左右）
   - 例如：上下各遮挡 6mm，左右各遮挡 5mm

2. **粗略换算** (2.42" = 61.2mm宽 × 30.6mm高)
   - 1mm ≈ 2 像素（宽度方向）
   - 1mm ≈ 2 像素（高度方向）

3. **选择配置值**
   - 6mm 遮挡 ≈ 12像素 → 选择 `80` 或 `85`
   - 上传测试，观察效果
   - 调整直到所有内容都在可见区域内

---

## 🖼️ 边框样式配置

### 2. `BORDER_STYLE` - 边框样式

| 配置值 | 样式 | 效果 | 适用场景 |
|--------|------|------|---------|
| **`0`** | **无边框** | 纯内容显示 | **推荐：生产环境** |
| `1` | 单线边框 | 简洁清晰 | 调试时查看显示区域 |
| `2` | 双线边框 | 更醒目 | 强调显示区域 |
| `3` | 圆角边框 | 柔和美观 | 特殊风格需求 |

### 示例效果

#### 样式 0 - 无边框（推荐生产环境）
```
    EAGLSON WASH
    ─────────────
   24h Self-Service
     Quick & Safe
   Member Discount
  Press OK to Start
```

#### 样式 1 - 单线边框（调试用）
```
┌──────────────────┐
│  EAGLSON WASH   │
├──────────────────┤
│24h Self-Service  │
│  Quick & Safe    │
│ Member Discount  │
│Press OK to Start │
└──────────────────┘
```

#### 样式 2 - 双线边框
```
╔══════════════════╗
║  EAGLSON WASH   ║
╠══════════════════╣
║24h Self-Service  ║
║  Quick & Safe    ║
║ Member Discount  ║
║Press OK to Start ║
╚══════════════════╝
```

#### 样式 3 - 圆角边框
```
╭──────────────────╮
│  EAGLSON WASH   │
├──────────────────┤
│24h Self-Service  │
│  Quick & Safe    │
│ Member Discount  │
│Press OK to Start │
╰──────────────────╯
```

---

## 🚀 典型配置场景

### 场景 1：无遮挡（裸屏测试）
```cpp
#define DISPLAY_AREA_PERCENT 100
#define BORDER_STYLE 0
```
全屏显示，无边框

---

### 场景 2：标准遮挡罩子（推荐）
```cpp
#define DISPLAY_AREA_PERCENT 80
#define BORDER_STYLE 0
```
留出 13px 边距，无边框，适合大多数外壳

---

### 场景 3：调试模式
```cpp
#define DISPLAY_AREA_PERCENT 80
#define BORDER_STYLE 1
```
显示单线边框，方便查看显示区域是否合适

---

### 场景 4：极端遮挡
```cpp
#define DISPLAY_AREA_PERCENT 70
#define BORDER_STYLE 0
```
留出 19px 边距，适应严重遮挡的外壳

---

## 🧪 调试步骤

### 步骤 1：开启边框辅助线
```cpp
#define BORDER_STYLE 1  // 显示边框
```

### 步骤 2：调整显示区域
从 80 开始测试：
```cpp
#define DISPLAY_AREA_PERCENT 80
```

观察屏幕：
- 如果文字被罩子遮挡 → **减小**百分比（75, 70...）
- 如果边距太大浪费空间 → **增大**百分比（85, 90...）

### 步骤 3：确定最佳值后关闭边框
```cpp
#define BORDER_STYLE 0  // 关闭边框
```

---

## 📸 实际测试参考

根据您提供的照片：

### 当前配置效果分析
- **DISPLAY_AREA_PERCENT = 80** ✅ 合适
  - 所有文字都在可见区域内
  - 边距适中，没有被遮挡

- **BORDER_STYLE = 0** ✅ 推荐
  - 无边框，界面简洁
  - 适合生产环境

### 界面效果
✅ 欢迎界面 - 文字居中，清晰
✅ 套餐选择 - 价格右对齐，易读
✅ 刷卡提示 - 动画圆圈居中
✅ 洗车进度 - 倒计时大号字体，进度条清晰

---

## ⚙️ 高级调整

### 如果罩子不是对称遮挡

当前实现是**对称留边**（上下左右相等）。

如果您的罩子上下遮挡和左右遮挡不同，需要：

1. 测量最大遮挡方向
2. 按最大遮挡配置 `DISPLAY_AREA_PERCENT`
3. 这样保证所有方向都不会被遮挡

例如：
- 上下各遮挡 8mm
- 左右各遮挡 5mm
→ 按 8mm 配置 → `DISPLAY_AREA_PERCENT = 75`

---

## 📝 版本历史

### v2.4.3 (2025-11-01)
- ✅ 添加可配置显示区域（适配遮挡罩子）
- ✅ 添加边框样式选项（0=无边框, 1=单线, 2=双线, 3=圆角）
- ✅ 所有界面自适应显示区域
- ✅ 优化字体（Helvetica 系列）
- ✅ 文字居中对齐，充分利用屏幕空间

### v2.4.2
- 升级到 SSD1309 驱动
- UI 优化（居中+横向布局）

### v2.4.1
- 修复欢迎界面自动重启

---

## 🔗 相关文档

- [OLED 升级指南](OLED_UPGRADE.md)
- [配置指南](CONFIG_GUIDE.md)
- [字体优化说明](FONT_OPTIMIZATION.md)

---

**开发者**: GoldSky_Lite 项目团队
**最后更新**: 2025-11-01
