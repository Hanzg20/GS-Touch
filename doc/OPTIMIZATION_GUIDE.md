# GoldSky_Lite åŠ¡å®ä¼˜åŒ–æŒ‡å—

**åŸåˆ™ï¼šç®€å•ã€ç¨³å®šã€å®ç”¨ã€å¿«é€Ÿä¸Šçº¿ã€æ˜“ç»´æŠ¤**

æœ¬æ–‡æ¡£æä¾›**5ä¸ªé«˜ä»·å€¼ã€ä½æˆæœ¬**çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œæ¯ä¸ªéƒ½å¯ä»¥ç‹¬ç«‹å®æ–½ã€‚

---

## ğŸ“Š ä¼˜åŒ–æ¸…å•æ¦‚è§ˆ

| ä¼˜åŒ–é¡¹ | éš¾åº¦ | æ”¶ç›Š | ä»£ç é‡ | å®æ–½æ—¶é—´ | ä¼˜å…ˆçº§ |
|--------|------|------|--------|----------|--------|
| 1. é”™è¯¯è‡ªåŠ¨æ¢å¤ | â­ | â­â­â­â­â­ | +40è¡Œ | 15åˆ†é’Ÿ | ğŸ”´ é«˜ |
| 2. å†…å­˜æ³„æ¼é˜²æŠ¤ | â­ | â­â­â­â­ | +30è¡Œ | 10åˆ†é’Ÿ | ğŸ”´ é«˜ |
| 3. NFCè¯»å¡å¢å¼º | â­â­ | â­â­â­â­ | +50è¡Œ | 20åˆ†é’Ÿ | ğŸŸ¡ ä¸­ |
| 4. è°ƒè¯•å¼€å…³ | â­ | â­â­â­ | +20è¡Œ | 10åˆ†é’Ÿ | ğŸŸ¡ ä¸­ |
| 5. é…ç½®æ–‡æ¡£åŒ– | â­ | â­â­â­â­ | +10è¡Œ | 30åˆ†é’Ÿ | ğŸŸ¢ ä½ |

**æ€»è®¡ï¼š** 1.5å°æ—¶ï¼Œ+150è¡Œä»£ç 

---

## ğŸ›¡ï¸ ä¼˜åŒ– 1ï¼šé”™è¯¯è‡ªåŠ¨æ¢å¤æœºåˆ¶

### é—®é¢˜
- WiFiæ–­çº¿ã€NFCå¶å°”å¤±è´¥ã€APIè¶…æ—¶å¯èƒ½å¯¼è‡´ç³»ç»Ÿå¡æ­»
- ç”¨æˆ·éœ€è¦æ‰‹åŠ¨é‡å¯è®¾å¤‡

### è§£å†³æ–¹æ¡ˆ
æ·»åŠ ç®€å•çš„é”™è¯¯è®¡æ•°å™¨å’Œè‡ªåŠ¨æ¢å¤é€»è¾‘ã€‚

### å®æ–½æ­¥éª¤

**æ­¥éª¤ 1ï¼šåœ¨å…¨å±€å˜é‡åŒºæ·»åŠ ï¼ˆç¬¬192è¡Œé™„è¿‘ï¼‰**

```cpp
// =================== é”™è¯¯æ¢å¤æœºåˆ¶ ===================
unsigned long lastSuccessfulOperation = 0;
int consecutiveErrors = 0;
#define MAX_CONSECUTIVE_ERRORS 5
#define AUTO_RESTART_TIMEOUT_MS 300000  // 5åˆ†é’Ÿæ— æ“ä½œè‡ªåŠ¨é‡å¯
```

**æ­¥éª¤ 2ï¼šåœ¨ loop() å¼€å¤´æ·»åŠ ç›‘æ§**

```cpp
void loop() {
  loopStartTime = millis();

  // âœ… æ–°å¢ï¼šé”™è¯¯æ¢å¤ç›‘æ§
  // å¦‚æœ5åˆ†é’Ÿå†…æ— ä»»ä½•æˆåŠŸæ“ä½œï¼Œè‡ªåŠ¨é‡å¯
  if (millis() - lastSuccessfulOperation > AUTO_RESTART_TIMEOUT_MS) {
    Serial.println("âš ï¸ é•¿æ—¶é—´æ— æ“ä½œï¼Œè‡ªåŠ¨é‡å¯...");
    delay(1000);
    ESP.restart();
  }

  // å¦‚æœè¿ç»­é”™è¯¯è¶…è¿‡5æ¬¡ï¼Œé‡ç½®åˆ°å¾…æœºçŠ¶æ€
  if (consecutiveErrors >= MAX_CONSECUTIVE_ERRORS) {
    Serial.printf("âš ï¸ è¿ç»­é”™è¯¯ %d æ¬¡ï¼Œé‡ç½®ç³»ç»Ÿ\n", consecutiveErrors);
    consecutiveErrors = 0;
    beepError();
    resetToIdle();
  }

  // ... åŸæœ‰ä»£ç 
}
```

**æ­¥éª¤ 3ï¼šåœ¨å…³é”®æ“ä½œåæ›´æ–°çŠ¶æ€**

```cpp
// æˆåŠŸè¯»å¡å
String decimalUID = readCardUID();
if (decimalUID.length() > 0) {
  lastSuccessfulOperation = millis();  // âœ… æ ‡è®°æˆåŠŸæ“ä½œ
  consecutiveErrors = 0;               // âœ… é‡ç½®é”™è¯¯è®¡æ•°
  // ... åŸæœ‰é€»è¾‘
}

// APIè°ƒç”¨å¤±è´¥æ—¶
if (!recordTransactionToSupabase(...)) {
  consecutiveErrors++;  // âœ… å¢åŠ é”™è¯¯è®¡æ•°
  Serial.printf("âš ï¸ APIå¤±è´¥ï¼Œè¿ç»­é”™è¯¯: %d/%d\n", consecutiveErrors, MAX_CONSECUTIVE_ERRORS);
}
```

### æ•ˆæœ
- âœ… ç³»ç»Ÿå¡æ­»è‡ªåŠ¨é‡å¯
- âœ… è¿ç»­é”™è¯¯è‡ªåŠ¨æ¢å¤
- âœ… æ— éœ€æ‰‹åŠ¨å¹²é¢„

---

## ğŸ§  ä¼˜åŒ– 2ï¼šå†…å­˜æ³„æ¼é˜²æŠ¤

### é—®é¢˜
- é•¿æ—¶é—´è¿è¡Œåå¯èƒ½å‡ºç°å†…å­˜ä¸è¶³
- ç¨‹åºå´©æºƒé‡å¯

### è§£å†³æ–¹æ¡ˆ
æ·»åŠ å†…å­˜ç›‘æ§å’Œä¸»åŠ¨æ¸…ç†ã€‚

### å®æ–½æ­¥éª¤

**åœ¨ performSystemHealthCheck() å‡½æ•°ä¸­æ·»åŠ ï¼ˆç¬¬700è¡Œé™„è¿‘ï¼‰**

```cpp
void performSystemHealthCheck() {
  if (millis() - lastHeartbeat > 60000) {
    uint32_t freeHeap = ESP.getFreeHeap();

    Serial.printf("ğŸ’“ RAM: %uKB, Loop: %lums, WiFi: %s\n",
                  freeHeap/1024, maxLoopTime, wifiConnected ? "ON" : "OFF");

    // âœ… æ–°å¢ï¼šå†…å­˜ä¸è¶³æ—¶ä¸»åŠ¨é‡å¯
    if (freeHeap < 20000) {  // ä½äº20KB
      Serial.println("âš ï¸ å†…å­˜ä¸è¶³ï¼Œå‡†å¤‡é‡å¯...");
      Serial.printf("   æœ€å°å‰©ä½™: %uKB\n", freeHeap/1024);

      // ä¿å­˜çŠ¶æ€ï¼ˆå¦‚æœéœ€è¦ï¼‰
      // saveState();

      delay(2000);
      ESP.restart();
    }

    // âœ… æ–°å¢ï¼šå†…å­˜é¢„è­¦
    if (freeHeap < 40000) {  // ä½äº40KB
      Serial.println("âš ï¸ å†…å­˜é¢„è­¦ï¼");

      // æ¸…ç†å¯èƒ½çš„å†…å­˜æ³„æ¼
      // æ–­å¼€WiFié‡è¿å¯ä»¥é‡Šæ”¾ä¸€äº›å†…å­˜
      if (wifiConnected) {
        Serial.println("   å°è¯•é‡è¿WiFié‡Šæ”¾å†…å­˜...");
        WiFi.disconnect();
        delay(500);
        WiFi.reconnect();
      }
    }

    lastHeartbeat = millis();
    maxLoopTime = 0;
  }
}
```

### æ•ˆæœ
- âœ… å†…å­˜ä¸è¶³å‰ä¸»åŠ¨é‡å¯ï¼ˆé¿å…å´©æºƒï¼‰
- âœ… å†…å­˜é¢„è­¦å’Œè‡ªåŠ¨æ¸…ç†
- âœ… æé«˜é•¿æœŸç¨³å®šæ€§

---

## ğŸ“¡ ä¼˜åŒ– 3ï¼šNFC è¯»å¡å¢å¼ºï¼ˆé˜²æŠ–åŠ¨ï¼‰

### é—®é¢˜
- å¡ç‰‡å¿«é€Ÿè¿ç»­è¯»å–å¤šæ¬¡
- ç”¨æˆ·ä½“éªŒä¸å¥½

### è§£å†³æ–¹æ¡ˆ
æ·»åŠ è¯»å¡é˜²æŠ–å’Œé‡å¤æ£€æµ‹ã€‚

### å®æ–½æ­¥éª¤

**åœ¨å…¨å±€å˜é‡åŒºæ·»åŠ **

```cpp
// =================== NFC é˜²æŠ–åŠ¨ ===================
String lastReadUID = "";
unsigned long lastReadTime = 0;
#define NFC_DEBOUNCE_MS 2000  // 2ç§’å†…ä¸é‡å¤è¯»å–åŒä¸€å¼ å¡
```

**ä¿®æ”¹ readCardUID() å‡½æ•°**

```cpp
String readCardUID() {
  if (!mfrc522.PICC_IsNewCardPresent()) {
    return "";
  }

  delay(10);

  if (!mfrc522.PICC_ReadCardSerial()) {
    Serial.println("âš ï¸ å¡ç‰‡æ£€æµ‹åˆ°ä½†è¯»å–å¤±è´¥");
    return "";
  }

  String hexUID = "";
  for (byte i = 0; i < mfrc522.uid.size; i++) {
    if (mfrc522.uid.uidByte[i] < 0x10) hexUID += "0";
    hexUID += String(mfrc522.uid.uidByte[i], HEX);
  }
  hexUID.toUpperCase();

  String decimalUID = hexToDecimal(hexUID);

  // âœ… æ–°å¢ï¼šé˜²æ­¢é‡å¤è¯»å–
  if (decimalUID == lastReadUID &&
      millis() - lastReadTime < NFC_DEBOUNCE_MS) {
    Serial.println("â­ï¸ è·³è¿‡é‡å¤è¯»å¡");
    mfrc522.PICC_HaltA();
    return "";  // è¿”å›ç©ºï¼Œä¸å¤„ç†
  }

  // æ›´æ–°æœ€åè¯»å–è®°å½•
  lastReadUID = decimalUID;
  lastReadTime = millis();

  Serial.println("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”");
  Serial.printf("ğŸ“¡ è¯»å–åˆ°å¡ç‰‡: HEX=%s, DEC=%s\n", hexUID.c_str(), decimalUID.c_str());

  // ... åŸæœ‰çš„å¡ç‰‡ç±»å‹æ˜¾ç¤ºä»£ç 

  mfrc522.PICC_HaltA();
  mfrc522.PCD_StopCrypto1();

  return decimalUID;
}
```

### æ•ˆæœ
- âœ… é¿å…åŒä¸€å¼ å¡è¿ç»­è§¦å‘
- âœ… æé«˜ç”¨æˆ·ä½“éªŒ
- âœ… å‡å°‘æ— æ•ˆAPIè°ƒç”¨

---

## ğŸ”§ ä¼˜åŒ– 4ï¼šè°ƒè¯•å¼€å…³ï¼ˆç”Ÿäº§/å¼€å‘æ¨¡å¼ï¼‰

### é—®é¢˜
- ä¸²å£è°ƒè¯•ä¿¡æ¯è¿‡å¤šï¼Œå½±å“æ€§èƒ½
- ç”Ÿäº§ç¯å¢ƒä¸éœ€è¦è¯¦ç»†æ—¥å¿—

### è§£å†³æ–¹æ¡ˆ
æ·»åŠ ç®€å•çš„è°ƒè¯•å¼€å…³ã€‚

### å®æ–½æ­¥éª¤

**åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ ï¼ˆç¬¬66è¡Œé™„è¿‘ï¼‰**

```cpp
// =================== ç³»ç»Ÿé…ç½® ===================
#define MACHINE_ID "EAGLESON_TERMINAL_01"
#define FIRMWARE_VERSION "v5.1"
#define MAX_RETRY_COUNT 3

// âœ… æ–°å¢ï¼šè°ƒè¯•æ¨¡å¼å¼€å…³
#define DEBUG_MODE true  // å¼€å‘ç¯å¢ƒè®¾ç½®ä¸º trueï¼Œç”Ÿäº§ç¯å¢ƒè®¾ç½®ä¸º false

// è°ƒè¯•å®å®šä¹‰
#if DEBUG_MODE
  #define DEBUG_PRINT(x) Serial.print(x)
  #define DEBUG_PRINTLN(x) Serial.println(x)
  #define DEBUG_PRINTF(...) Serial.printf(__VA_ARGS__)
#else
  #define DEBUG_PRINT(x)
  #define DEBUG_PRINTLN(x)
  #define DEBUG_PRINTF(...)
#endif

// å…³é”®æ—¥å¿—ï¼ˆæ— è®ºæ¨¡å¼éƒ½è¾“å‡ºï¼‰
#define LOG_PRINT(x) Serial.print(x)
#define LOG_PRINTLN(x) Serial.println(x)
#define LOG_PRINTF(...) Serial.printf(__VA_ARGS__)
```

**æ›¿æ¢ä»£ç ä¸­çš„è°ƒè¯•è¾“å‡º**

```cpp
// å¼€å‘è°ƒè¯•ä¿¡æ¯ï¼ˆå¯å…³é—­ï¼‰
DEBUG_PRINTLN("ğŸ” æ­£åœ¨æ‰«æNFCå¡ç‰‡...");
DEBUG_PRINTF("   ComIrqå¯„å­˜å™¨: 0x%02X\n", comIrqReg);

// å…³é”®ä¸šåŠ¡æ—¥å¿—ï¼ˆå§‹ç»ˆè¾“å‡ºï¼‰
LOG_PRINTLN("ğŸ“¡ è¯»å–åˆ°å¡ç‰‡");
LOG_PRINTF("âœ… äº¤æ˜“æˆåŠŸ: $%.2f\n", amount);
```

### ä½¿ç”¨æ–¹å¼

**å¼€å‘ç¯å¢ƒï¼š**
```cpp
#define DEBUG_MODE true
```
è¾“å‡ºè¯¦ç»†è°ƒè¯•ä¿¡æ¯ã€‚

**ç”Ÿäº§ç¯å¢ƒï¼š**
```cpp
#define DEBUG_MODE false
```
åªè¾“å‡ºå…³é”®ä¸šåŠ¡æ—¥å¿—ï¼Œæé«˜æ€§èƒ½ã€‚

### æ•ˆæœ
- âœ… å‡å°‘ä¸²å£å¼€é”€
- âœ… æé«˜ç”Ÿäº§ç¯å¢ƒæ€§èƒ½
- âœ… ä¾¿äºé—®é¢˜æ’æŸ¥

---

## ğŸ“ ä¼˜åŒ– 5ï¼šé…ç½®é›†ä¸­ç®¡ç†

### é—®é¢˜
- é…ç½®å‚æ•°åˆ†æ•£åœ¨ä»£ç å„å¤„
- éƒ¨ç½²å¤šå°è®¾å¤‡éœ€è¦æ”¹å¤šä¸ªåœ°æ–¹

### è§£å†³æ–¹æ¡ˆ
é›†ä¸­é…ç½®å‚æ•°åˆ°æ–‡ä»¶é¡¶éƒ¨ã€‚

### å®æ–½æ­¥éª¤

**åœ¨æ–‡ä»¶å¼€å¤´åˆ›å»ºé…ç½®åŒºåŸŸï¼ˆç¬¬56è¡Œå¼€å§‹ï¼‰**

```cpp
// =================== ğŸ“Œ éƒ¨ç½²é…ç½®åŒºï¼ˆä¿®æ”¹è¿™é‡Œå³å¯ï¼‰ ===================

// WiFié…ç½®
#define WIFI_SSID       "hanzg_hanyh"
#define WIFI_PASSWORD   "han1314521"
#define WIFI_TIMEOUT_MS 20000

// Supabaseé…ç½®
#define SUPABASE_URL "https://ttbtxxpnvkcbyugzdqfw.supabase.co"
#define SUPABASE_KEY "eyJhbGci..."

// è®¾å¤‡é…ç½®
#define MACHINE_ID       "EAGLESON_TERMINAL_01"  // âš ï¸ æ¯å°è®¾å¤‡ä¸åŒ
#define FIRMWARE_VERSION "v5.1"
#define DEBUG_MODE       true  // ç”Ÿäº§ç¯å¢ƒæ”¹ä¸º false

// ä¸šåŠ¡é…ç½®
#define ENABLE_OFFLINE_MODE true   // æ”¯æŒç¦»çº¿æ¨¡å¼
#define ENABLE_SOUND        true   // å¯ç”¨å£°éŸ³
#define ENABLE_LED          true   // å¯ç”¨LEDæŒ‡ç¤º

// è¶…æ—¶é…ç½®ï¼ˆç§’ï¼‰
#define TIMEOUT_LANGUAGE  15
#define TIMEOUT_SELECT    20
#define TIMEOUT_CARD_SCAN 15
#define TIMEOUT_CONFIRM   25

// è„‰å†²é…ç½®
#define PULSE_WIDTH_MS    100
#define PULSE_INTERVAL_MS 1000

// é”™è¯¯æ¢å¤é…ç½®
#define MAX_CONSECUTIVE_ERRORS 5
#define AUTO_RESTART_MINS      5

// =================== é…ç½®åŒºç»“æŸ ===================
```

**æ·»åŠ é…ç½®éªŒè¯**

```cpp
void setup() {
  Serial.begin(115200);
  delay(1000);

  // âœ… é…ç½®éªŒè¯
  Serial.println("=====================================");
  Serial.printf("ğŸš— %s v%s\n", MACHINE_ID, FIRMWARE_VERSION);
  Serial.printf("ğŸ“¡ WiFi SSID: %s\n", WIFI_SSID);
  Serial.printf("ğŸ”§ è°ƒè¯•æ¨¡å¼: %s\n", DEBUG_MODE ? "å¼€å¯" : "å…³é—­");
  Serial.printf("ğŸ”Š å£°éŸ³: %s\n", ENABLE_SOUND ? "å¼€å¯" : "å…³é—­");
  Serial.printf("ğŸ’¡ LED: %s\n", ENABLE_LED ? "å¼€å¯" : "å…³é—­");
  Serial.println("=====================================");

  // é…ç½®æ£€æŸ¥
  if (String(MACHINE_ID) == "EAGLESON_TERMINAL_01") {
    Serial.println("âš ï¸ è­¦å‘Šï¼šä½¿ç”¨é»˜è®¤æœºå™¨IDï¼Œè¯·ä¿®æ”¹ä¸ºå”¯ä¸€ID");
  }

  // ... åŸæœ‰åˆå§‹åŒ–ä»£ç 
}
```

### æ•ˆæœ
- âœ… å¿«é€Ÿéƒ¨ç½²å¤šå°è®¾å¤‡
- âœ… é…ç½®ä¸€ç›®äº†ç„¶
- âœ… å‡å°‘é…ç½®é”™è¯¯

---

## ğŸš€ å¿«é€Ÿå®æ–½å»ºè®®

### æ–¹æ¡ˆ Aï¼šæœ€å°æ”¹åŠ¨ï¼ˆ15åˆ†é’Ÿï¼‰
åªå®æ–½**ä¼˜åŒ–1+ä¼˜åŒ–2**ï¼Œç«‹å³æé«˜ç¨³å®šæ€§ã€‚

### æ–¹æ¡ˆ Bï¼šæ ‡å‡†ä¼˜åŒ–ï¼ˆ1å°æ—¶ï¼‰
å®æ–½**ä¼˜åŒ–1-4**ï¼Œå¤§å¹…æå‡è´¨é‡ã€‚

### æ–¹æ¡ˆ Cï¼šå®Œæ•´ä¼˜åŒ–ï¼ˆ1.5å°æ—¶ï¼‰
å®æ–½**å…¨éƒ¨5é¡¹**ï¼Œè¾¾åˆ°ç”Ÿäº§çº§æ ‡å‡†ã€‚

---

## ğŸ“‹ å®æ–½æ£€æŸ¥æ¸…å•

å®æ–½æ¯é¡¹ä¼˜åŒ–åï¼Œå‹¾é€‰å¯¹åº”é¡¹ï¼š

- [ ] ä¼˜åŒ–1ï¼šé”™è¯¯è‡ªåŠ¨æ¢å¤
  - [ ] æ·»åŠ å…¨å±€å˜é‡
  - [ ] ä¿®æ”¹ loop() å‡½æ•°
  - [ ] åœ¨å…³é”®ä½ç½®æ›´æ–°çŠ¶æ€
  - [ ] æµ‹è¯•ï¼šè®©ç³»ç»Ÿæ•…æ„å‡ºé”™5æ¬¡ï¼Œè§‚å¯Ÿæ˜¯å¦è‡ªåŠ¨æ¢å¤

- [ ] ä¼˜åŒ–2ï¼šå†…å­˜æ³„æ¼é˜²æŠ¤
  - [ ] ä¿®æ”¹ performSystemHealthCheck()
  - [ ] æµ‹è¯•ï¼šè¿è¡Œ24å°æ—¶ï¼Œè§‚å¯Ÿå†…å­˜å˜åŒ–

- [ ] ä¼˜åŒ–3ï¼šNFCè¯»å¡å¢å¼º
  - [ ] æ·»åŠ é˜²æŠ–å˜é‡
  - [ ] ä¿®æ”¹ readCardUID()
  - [ ] æµ‹è¯•ï¼šå¿«é€Ÿè¿ç»­åˆ·å¡ï¼Œç¡®è®¤åªå¤„ç†ä¸€æ¬¡

- [ ] ä¼˜åŒ–4ï¼šè°ƒè¯•å¼€å…³
  - [ ] æ·»åŠ  DEBUG_MODE å®
  - [ ] æ›¿æ¢éƒ¨åˆ† Serial.print
  - [ ] æµ‹è¯•ï¼šå…³é—­è°ƒè¯•æ¨¡å¼ï¼Œç¡®è®¤æ€§èƒ½æå‡

- [ ] ä¼˜åŒ–5ï¼šé…ç½®é›†ä¸­ç®¡ç†
  - [ ] åˆ›å»ºé…ç½®åŒº
  - [ ] æ·»åŠ é…ç½®éªŒè¯
  - [ ] æµ‹è¯•ï¼šä¿®æ”¹é…ç½®åé‡æ–°ç¼–è¯‘

---

## ğŸ” æµ‹è¯•å»ºè®®

### ç¨³å®šæ€§æµ‹è¯•
```
1. è¿ç»­è¿è¡Œ 24 å°æ—¶
2. æ–­å¼€WiFiåé‡è¿
3. è¿ç»­åˆ·å¡ 100 æ¬¡
4. æ¨¡æ‹ŸAPIè¶…æ—¶ï¼ˆæ–­ç½‘ï¼‰
5. è§‚å¯Ÿå†…å­˜å ç”¨è¶‹åŠ¿
```

### æ€§èƒ½æµ‹è¯•
```
1. æµ‹è¯•ä»åˆ·å¡åˆ°å®Œæˆçš„æ€»æ—¶é—´
2. æµ‹è¯•ä¸²å£è¾“å‡ºé€Ÿåº¦
3. æµ‹è¯•å†…å­˜å³°å€¼
4. æµ‹è¯•çœ‹é—¨ç‹—æ˜¯å¦è§¦å‘
```

### ç”¨æˆ·ä½“éªŒæµ‹è¯•
```
1. å¿«é€Ÿè¿ç»­åˆ·å¡ï¼ˆé˜²æŠ–æµ‹è¯•ï¼‰
2. è¶…æ—¶è‡ªåŠ¨è¿”å›å¾…æœº
3. é”™è¯¯æç¤ºæ˜¯å¦æ¸…æ™°
4. LED/èœ‚é¸£å™¨åé¦ˆæ˜¯å¦åŠæ—¶
```

---

## ğŸ“ é—®é¢˜æ’æŸ¥

### å¦‚æœä¼˜åŒ–åå‡ºç°é—®é¢˜

**é—®é¢˜1ï¼šå†…å­˜ä¸è¶³é¢‘ç¹é‡å¯**
```cpp
// è°ƒæ•´å†…å­˜é˜ˆå€¼
if (freeHeap < 15000) {  // ä»20000é™åˆ°15000
```

**é—®é¢˜2ï¼šè‡ªåŠ¨é‡å¯å¤ªé¢‘ç¹**
```cpp
// å»¶é•¿è¶…æ—¶æ—¶é—´
#define AUTO_RESTART_TIMEOUT_MS 600000  // ä»5åˆ†é’Ÿæ”¹ä¸º10åˆ†é’Ÿ
```

**é—®é¢˜3ï¼šNFCé˜²æŠ–æ—¶é—´å¤ªé•¿**
```cpp
// ç¼©çŸ­é˜²æŠ–æ—¶é—´
#define NFC_DEBOUNCE_MS 1000  // ä»2ç§’æ”¹ä¸º1ç§’
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥ä¼˜åŒ–æ–¹å‘ï¼ˆå¯é€‰ï¼‰

å®ŒæˆåŸºç¡€ä¼˜åŒ–åï¼Œå¦‚æœéœ€è¦è¿›ä¸€æ­¥æå‡ï¼š

1. **ç¦»çº¿äº¤æ˜“ç¼“å­˜** - ä½¿ç”¨ SPIFFS å­˜å‚¨ç¦»çº¿äº¤æ˜“ï¼ˆ+2å°æ—¶ï¼‰
2. **è¿œç¨‹é…ç½®æ›´æ–°** - æ”¯æŒä»äº‘ç«¯æ›´æ–°é…ç½®ï¼ˆ+3å°æ—¶ï¼‰
3. **OTAå›ºä»¶æ›´æ–°** - è¿œç¨‹å‡çº§å›ºä»¶ï¼ˆ+4å°æ—¶ï¼‰

ä½†æ ¹æ®ä½ çš„åŸåˆ™ï¼Œå»ºè®®å…ˆæŠŠåŸºç¡€ä¼˜åŒ–åšç¨³å®šï¼Œå†è€ƒè™‘é«˜çº§åŠŸèƒ½ã€‚

---

## ğŸ“ æ€»ç»“

è¿™5é¡¹ä¼˜åŒ–ï¼š
- âœ… ç®€å•æ˜“æ‡‚ï¼ˆæœ€å¤š50è¡Œä»£ç /é¡¹ï¼‰
- âœ… ç¨³å®šå¯é ï¼ˆä¸æ”¹å˜æ ¸å¿ƒé€»è¾‘ï¼‰
- âœ… å®ç”¨æ€§å¼ºï¼ˆè§£å†³çœŸå®é—®é¢˜ï¼‰
- âœ… å¿«é€Ÿä¸Šçº¿ï¼ˆ1.5å°æ—¶å®Œæˆï¼‰
- âœ… æ˜“äºç»´æŠ¤ï¼ˆä»£ç æ¸…æ™°æ³¨é‡Šï¼‰

**å»ºè®®å…ˆå®æ–½ä¼˜åŒ–1å’Œ2ï¼Œè¿è¡Œç¨³å®šåå†é€æ­¥æ·»åŠ å…¶ä»–ä¼˜åŒ–ã€‚**

æœ‰ä»»ä½•é—®é¢˜ï¼Œéšæ—¶æŸ¥çœ‹æœ¬æ–‡æ¡£æˆ–å’¨è¯¢æŠ€æœ¯æ”¯æŒã€‚
