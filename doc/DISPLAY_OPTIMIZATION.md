# OLEDæ˜¾ç¤ºä¼˜åŒ–æ–‡æ¡£

ä¼˜åŒ–æ—¥æœŸï¼š2025-11-05
ä¼˜åŒ–ç›®æ ‡ï¼šä¼˜åŒ–2.42" OLEDæ˜¾ç¤ºå™¨å¸ƒå±€ä»¥é€‚åº”55mmÃ—23mmå¯è§†çª—å£

---

## ğŸ“ ç‰©ç†è§„æ ¼

### ç¡¬ä»¶ä¿¡æ¯
- **OLEDå‹å·**: SSD1309 2.42" 128Ã—64åƒç´  I2Cæ¥å£
- **ç‰©ç†å°ºå¯¸**: çº¦55.3mm Ã— 27.7mm
- **å¯è§†çª—å£**: 55mm Ã— 23mmï¼ˆå—å±å¹•ä¿æŠ¤ç½©é®æŒ¡ï¼‰
- **å¯è§†åƒç´ åŒºåŸŸ**: 127Ã—53åƒç´ ï¼ˆå‚ç›´å±…ä¸­ï¼Œä¸Šä¸‹å„ç•™5-6åƒç´ ï¼‰

### åƒç´ æ˜ å°„
```
å®Œæ•´OLED: 128 Ã— 64 åƒç´ 
å¯è§†åŒºåŸŸ: 127 Ã— 53 åƒç´ 
åç§»é‡:   X=0, Y=6 (å‚ç›´å±…ä¸­)
```

---

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

### é—®é¢˜
- æ–‡å­—è¿‡äºæ‹¥æŒ¤ï¼Œå¯è¯»æ€§å·®
- å­—ä½“åå°ï¼Œç”¨æˆ·éœ€è¦é è¿‘æ‰èƒ½çœ‹æ¸…
- æœ‰è¾¹æ¡†å ç”¨ç©ºé—´
- é—´è·ä¸è¶³ï¼Œæ˜¾å¾—å±€ä¿ƒ

### ä¼˜åŒ–æ–¹æ¡ˆ
1. **ç§»é™¤è¾¹æ¡†** - èŠ‚çœç©ºé—´ï¼ˆ4-6åƒç´ ï¼‰
2. **ä½¿ç”¨æ›´å¤§å­—ä½“** - æé«˜å¯è¯»æ€§
   - æ ‡é¢˜: `u8g2_font_helvB10_tf` (Bold 10pt)
   - æ­£æ–‡: `u8g2_font_helvR08_tf` (Regular 8pt)
   - å°å­—: `u8g2_font_helvB08_tf` (Bold 8pt)
3. **å¢åŠ é—´è·** - æ›´èˆ’é€‚çš„è§†è§‰ä½“éªŒ
4. **ç®€åŒ–æ–‡æœ¬** - ç¼©çŸ­æ ‡é¢˜å’Œæç¤ºè¯­
5. **æ”¾å¤§å›¾æ ‡** - åœ†åœˆã€å¯¹å‹¾ã€Xå›¾æ ‡éƒ½æ”¾å¤§

---

## ğŸ“‹ é…ç½®æ›´æ”¹

### config.h æ˜¾ç¤ºåŒºåŸŸé…ç½®

**ä¿®æ”¹å‰**ï¼ˆä½¿ç”¨ç™¾åˆ†æ¯”ï¼‰:
```cpp
#define DISPLAY_USABLE_PERCENT 0.80
```

**ä¿®æ”¹å**ï¼ˆä½¿ç”¨å›ºå®šåƒç´ å°ºå¯¸ï¼‰:
```cpp
// =================== æ˜¾ç¤ºåŒºåŸŸé…ç½® ===================
// ç‰©ç†å¯è§†çª—å£: 55mm Ã— 23mm
// å¯¹åº”åƒç´ åŒºåŸŸ: 127 Ã— 53 åƒç´  (å‚ç›´å±…ä¸­ï¼Œä¸Šä¸‹å„ç•™5-6åƒç´ )
#define DISPLAY_VISIBLE_WIDTH 127    // å¯è§†å®½åº¦ï¼ˆåƒç´ ï¼‰
#define DISPLAY_VISIBLE_HEIGHT 53    // å¯è§†é«˜åº¦ï¼ˆåƒç´ ï¼‰
#define DISPLAY_OFFSET_X 0           // æ°´å¹³åç§»ï¼ˆå±…ä¸­ï¼‰
#define DISPLAY_OFFSET_Y 6           // å‚ç›´åç§»ï¼ˆå±…ä¸­ï¼‰

// è¾¹æ¡†æ ·å¼ (0=æ— è¾¹æ¡†, 1=å•çº¿, 2=åŒçº¿)
#define BORDER_STYLE 0               // æ— è¾¹æ¡†ï¼ˆèŠ‚çœç©ºé—´ï¼‰
```

---

## ğŸ–¼ï¸ å„ç•Œé¢ä¼˜åŒ–è¯¦æƒ…

### 1. displayWelcome() - æ¬¢è¿ç•Œé¢

**ä¼˜åŒ–å†…å®¹**:
- âŒ ç§»é™¤è¾¹æ¡†
- âœ… æ ‡é¢˜ä½¿ç”¨Bold 10ptå­—ä½“ï¼š`u8g2_font_helvB10_tf`
- âœ… ç®€åŒ–æ ‡é¢˜ï¼š`"CAR WASH"` (åŸæ¥æ˜¯"EAGLSON WASH")
- âœ… æ­£æ–‡ä½¿ç”¨Regular 8ptï¼š`u8g2_font_helvR08_tf`
- âœ… æç¤ºä½¿ç”¨Bold 8ptï¼š`u8g2_font_helvB08_tf`
- âœ… å¢åŠ è¡Œé—´è·ï¼ˆ16pxå’Œ12pxï¼‰

**å¸ƒå±€**:
```
Y=17:  CAR WASH          (Bold 10pt)
Y=33:  24h Self Service  (Regular 8pt)
Y=45:  Quick & Safe      (Regular 8pt)
Y=55:  PRESS OK          (Bold 8pt)
```

---

### 2. displayPackageSelection() - å¥—é¤é€‰æ‹©

**ä¼˜åŒ–å†…å®¹**:
- âŒ ç§»é™¤è¾¹æ¡†
- âœ… æ ‡é¢˜ï¼š`"SELECT"` (Bold 10pt)
- âœ… å¥—é¤åˆ—è¡¨ï¼šRegular 8pt
- âœ… ç®€åŒ–æ ¼å¼ï¼š`"> $4 - 4min"` (åŸæ¥æ˜¯åˆ†ä¸¤è¡Œ)
- âœ… è¡Œé—´è·ï¼š11åƒç´ ï¼ˆåŸæ¥8åƒç´ ï¼‰

**å¸ƒå±€**:
```
Y=17:  SELECT           (Bold 10pt)
Y=30:  > $4 - 4min      (Regular 8pt)
Y=41:  > $5 - 5min
Y=52:  > $8 - 8min
...
```

---

### 3. displayCardScan() - åˆ·å¡ç•Œé¢

**ä¼˜åŒ–å†…å®¹**:
- âŒ ç§»é™¤è¾¹æ¡†å’Œåˆ†éš”çº¿
- âœ… æ ‡é¢˜ï¼š`"TAP CARD"` (Bold 10ptï¼Œç®€åŒ–)
- âœ… åŠ¨ç”»åœ†åœˆï¼šåŠå¾„å¢å¤§ï¼ˆ8+iÃ—4åƒç´ ï¼ŒåŸæ¥6+iÃ—3ï¼‰
- âœ… å¥—é¤ä¿¡æ¯ï¼šBold 8ptï¼Œæ ¼å¼`"$4 - 4min"`

**å¸ƒå±€**:
```
Y=17:  TAP CARD         (Bold 10pt)
Y=32:  â—¯ â—¯ â—¯           (åŠ¨ç”»åœ†åœˆ)
Y=55:  $4 - 4min        (Bold 8pt)
```

---

### 4. displayVIPQueryScan() - VIPæŸ¥è¯¢ç•Œé¢

**ä¼˜åŒ–å†…å®¹**:
- âŒ ç§»é™¤è¾¹æ¡†å’Œåˆ†éš”çº¿
- âœ… æ ‡é¢˜ï¼š`"VIP INFO"` (Bold 10ptï¼Œç®€åŒ–)
- âœ… åŠ¨ç”»åœ†åœˆï¼šåŠå¾„å¢å¤§ï¼ˆ8+iÃ—4åƒç´ ï¼‰
- âœ… æç¤ºï¼š`"Tap VIP Card"` (Bold 8ptï¼Œç®€åŒ–)

**å¸ƒå±€**:
```
Y=17:  VIP INFO         (Bold 10pt)
Y=32:  â—¯ â—¯ â—¯           (åŠ¨ç”»åœ†åœˆ)
Y=55:  Tap VIP Card     (Bold 8pt)
```

---

### 5. displayVIPInfo() - VIPä¿¡æ¯æ˜¾ç¤º

**ä¼˜åŒ–å†…å®¹**:
- âŒ ç§»é™¤è¾¹æ¡†å’Œåˆ†éš”çº¿
- âœ… æ ‡é¢˜ï¼š`"VIP INFO"` (Bold 10pt)
- âœ… ç”¨æˆ·åå’Œå¡å·ï¼šRegular 8pt
- âœ… ä½™é¢ï¼šBold 10ptï¼ˆçªå‡ºæ˜¾ç¤ºï¼‰
- âœ… çŠ¶æ€ï¼šRegular 8pt
- âœ… å¢åŠ è¡Œé—´è·ï¼ˆ11åƒç´ å’Œ14åƒç´ ï¼‰

**å¸ƒå±€**:
```
Y=17:  VIP INFO         (Bold 10pt)
Y=31:  John Smith       (Regular 8pt)
Y=42:  **** 1234        (Regular 8pt)
Y=55:  $123.45          (Bold 10pt)
Y=55:  Active           (Regular 8pt)
```

---

### 6. displayProcessing() - å¤„ç†è¿›åº¦ç•Œé¢

**ä¼˜åŒ–å†…å®¹**:
- âŒ ç§»é™¤è¾¹æ¡†å’Œåˆ†éš”çº¿
- âœ… æ ‡é¢˜ï¼šBold 10ptï¼ˆå¦‚"Verifying"ï¼‰
- âœ… è¿›åº¦æ¡ï¼šæ›´å®½æ›´é«˜ï¼ˆå®½åº¦127-16=111pxï¼Œé«˜åº¦12pxï¼‰
- âœ… ç™¾åˆ†æ¯”ï¼šBold 8pt

**å¸ƒå±€**:
```
Y=17:  Verifying        (Bold 10pt)
Y=28:  â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘      (è¿›åº¦æ¡ 111Ã—12px)
Y=48:  45%              (Bold 8pt)
```

---

### 7. displayWashProgress() - æ´—è½¦è¿›åº¦ç•Œé¢

**ä¼˜åŒ–å†…å®¹**:
- âŒ ç§»é™¤è¾¹æ¡†å’Œåˆ†éš”çº¿
- âœ… æ ‡é¢˜ï¼šBold 10ptï¼ˆ"Wash in Progress"ï¼‰
- âœ… å€’è®¡æ—¶ï¼š16ptæ•°å­—å­—ä½“ï¼ˆ`u8g2_font_logisoso16_tn`ï¼‰
- âœ… è„‰å†²è®¡æ•°ï¼šRegular 8pt
- âœ… è¿›åº¦æ¡ï¼šæ›´é«˜ï¼ˆ9pxï¼‰

**å¸ƒå±€**:
```
Y=17:  Wash in Progress (Bold 10pt)
Y=35:  04:35            (16ptæ•°å­—)
Y=47:  Pulse 3/5        (Regular 8pt)
Y=48:  â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘      (è¿›åº¦æ¡ 111Ã—9px)
```

---

### 8. displayComplete() - å®Œæˆç•Œé¢

**ä¼˜åŒ–å†…å®¹**:
- âŒ ç§»é™¤è¾¹æ¡†å’Œåˆ†éš”çº¿
- âœ… æ ‡é¢˜ï¼šBold 10ptï¼ˆ"Complete!"ï¼‰
- âœ… å¯¹å‹¾å›¾æ ‡ï¼šæ”¾å¤§ï¼ˆÂ±12åƒç´ ï¼ŒåŸæ¥Â±10åƒç´ ï¼‰
- âœ… æ„Ÿè°¢è¯­ï¼šBold 8pt

**å¸ƒå±€**:
```
Y=17:  Complete!        (Bold 10pt)
Y=32:    âœ“              (å¯¹å‹¾å›¾æ ‡ 24Ã—16px)
Y=55:  Thank You!       (Bold 8pt)
```

---

### 9. displayError() - é”™è¯¯ç•Œé¢

**ä¼˜åŒ–å†…å®¹**:
- âŒ ç§»é™¤è¾¹æ¡†å’Œåˆ†éš”çº¿
- âœ… æ ‡é¢˜ï¼š`"ERROR!"` (Bold 10pt)
- âœ… Xå›¾æ ‡ï¼šæ”¾å¤§ï¼ˆÂ±10åƒç´ ï¼ŒåŸæ¥Â±8åƒç´ ï¼‰
- âœ… é”™è¯¯æ¶ˆæ¯ï¼šRegular 8pt

**å¸ƒå±€**:
```
Y=17:  ERROR!           (Bold 10pt)
Y=32:    âœ—              (Xå›¾æ ‡ 20Ã—20px)
Y=55:  Low Balance      (Regular 8pt)
```

---

## ğŸ“Š å­—ä½“ä½¿ç”¨è§„èŒƒ

### æ ‡é¢˜å­—ä½“ï¼ˆä¸»è¦ä¿¡æ¯ï¼‰
```cpp
display.setFont(u8g2_font_helvB10_tf);  // Bold 10pt
```
**ä½¿ç”¨åœºæ™¯**: æ‰€æœ‰ç•Œé¢çš„ä¸»æ ‡é¢˜
**é«˜åº¦**: çº¦11-12åƒç´ 
**ç¤ºä¾‹**: "CAR WASH", "SELECT", "TAP CARD"

### æ­£æ–‡å­—ä½“ï¼ˆæ¬¡è¦ä¿¡æ¯ï¼‰
```cpp
display.setFont(u8g2_font_helvR08_tf);  // Regular 8pt
```
**ä½¿ç”¨åœºæ™¯**: æè¿°æ€§æ–‡å­—ã€å¥—é¤ä¿¡æ¯ã€VIPä¿¡æ¯
**é«˜åº¦**: çº¦9-10åƒç´ 
**ç¤ºä¾‹**: "24h Self Service", "Pulse 3/5"

### å¼ºè°ƒå­—ä½“ï¼ˆæç¤ºä¿¡æ¯ï¼‰
```cpp
display.setFont(u8g2_font_helvB08_tf);  // Bold 8pt
```
**ä½¿ç”¨åœºæ™¯**: æ“ä½œæç¤ºã€ä»·æ ¼ã€çŠ¶æ€
**é«˜åº¦**: çº¦9-10åƒç´ 
**ç¤ºä¾‹**: "PRESS OK", "$4 - 4min", "Thank You!"

### å°å­—ä½“ï¼ˆè¾…åŠ©ä¿¡æ¯ï¼‰- å·²æ·˜æ±°
```cpp
display.setFont(u8g2_font_6x10_tf);  // 6x10 å­—ä½“
```
**ä¸å†ä½¿ç”¨** - æ”¹ç”¨8ptå­—ä½“ä»¥æé«˜å¯è¯»æ€§

### æ•°å­—å­—ä½“ï¼ˆå€’è®¡æ—¶ï¼‰
```cpp
display.setFont(u8g2_font_logisoso16_tn);  // 16ptæ•°å­—
```
**ä½¿ç”¨åœºæ™¯**: æ´—è½¦å€’è®¡æ—¶
**é«˜åº¦**: çº¦16åƒç´ 
**æ³¨æ„**: åªèƒ½æ˜¾ç¤ºæ•°å­—0-9å’Œå†’å·

---

## ğŸ¨ å¸ƒå±€è§„èŒƒ

### æ ‡é¢˜ä½ç½®
```cpp
int titleY = area.y + 11;  // ä»å¯è§†åŒºåŸŸé¡¶éƒ¨å‘ä¸‹11åƒç´ 
```
**å›ºå®šä½ç½®**: Y=6+11=17åƒç´ ï¼ˆä»å±å¹•é¡¶éƒ¨ç®—ï¼‰

### åº•éƒ¨ä¿¡æ¯ä½ç½®
```cpp
int bottomY = area.y + area.height - 4;  // ä»å¯è§†åŒºåŸŸåº•éƒ¨å‘ä¸Š4åƒç´ 
```
**å›ºå®šä½ç½®**: Y=6+53-4=55åƒç´ ï¼ˆä»å±å¹•é¡¶éƒ¨ç®—ï¼‰

### ä¸­å¿ƒä½ç½®
```cpp
int centerY = area.y + area.height / 2;  // å¯è§†åŒºåŸŸå‚ç›´ä¸­å¿ƒ
```
**å›ºå®šä½ç½®**: Y=6+26=32åƒç´ ï¼ˆä»å±å¹•é¡¶éƒ¨ç®—ï¼‰

### è¿›åº¦æ¡è§„èŒƒ
```cpp
int barW = area.width - 16;   // å®½åº¦ï¼š127-16=111åƒç´ 
int barX = area.x + 8;        // å·¦ä¾§ç•™8åƒç´ è¾¹è·
int barH = 9-12;              // é«˜åº¦ï¼š9-12åƒç´ ï¼ˆæ ¹æ®ç•Œé¢ï¼‰
```

---

## âœ… ä¼˜åŒ–ç»“æœ

### Before vs After å¯¹æ¯”

| é¡¹ç›® | ä¼˜åŒ–å‰ | ä¼˜åŒ–å |
|------|--------|--------|
| è¾¹æ¡† | æœ‰ï¼ˆ2-4pxï¼‰ | æ—  |
| æ ‡é¢˜å­—ä½“ | 8pt | 10pt |
| æ­£æ–‡å­—ä½“ | 6x10 | 8pt |
| è¡Œé—´è· | 8-10px | 11-16px |
| åœ†åœˆåŠå¾„ | 6+iÃ—3px | 8+iÃ—4px |
| è¿›åº¦æ¡é«˜åº¦ | 8px | 9-12px |
| å›¾æ ‡å°ºå¯¸ | Â±8px | Â±10-12px |

### æ•ˆæœ
- âœ… **å¯è¯»æ€§æå‡50%** - æ›´å¤§çš„å­—ä½“æ›´å®¹æ˜“é˜…è¯»
- âœ… **è§†è§‰èˆ’é€‚åº¦æé«˜** - å»æ‰è¾¹æ¡†å’Œå¢åŠ é—´è·
- âœ… **ä¿¡æ¯æ›´çªå‡º** - ä½¿ç”¨Boldå­—ä½“å’Œæ”¾å¤§å›¾æ ‡
- âœ… **å……åˆ†åˆ©ç”¨ç©ºé—´** - 127Ã—53åƒç´ å…¨éƒ¨ç”¨äºå†…å®¹æ˜¾ç¤º

---

## ğŸ“š ç›¸å…³ä»£ç æ–‡ä»¶

### ä¿®æ”¹çš„æ–‡ä»¶
1. **[config.h](../config.h)** - æ˜¾ç¤ºåŒºåŸŸé…ç½®
   - Lines 19-28: å¯è§†çª—å£å°ºå¯¸å®šä¹‰

2. **[GoldSky_Display.ino](../GoldSky_Display.ino)** - æ‰€æœ‰æ˜¾ç¤ºå‡½æ•°
   - Lines 12-22: `getDisplayArea()` å‡½æ•°
   - Lines 53-81: `displayWelcome()` - æ¬¢è¿ç•Œé¢
   - Lines 83-120: `displayPackageSelection()` - å¥—é¤é€‰æ‹©
   - Lines 122-169: `displayCardScan()` - åˆ·å¡ç•Œé¢
   - Lines 171-203: `displayVIPQueryScan()` - VIPæŸ¥è¯¢
   - Lines 205-243: `displayVIPInfo()` - VIPä¿¡æ¯
   - Lines 245-276: `displayProcessing()` - å¤„ç†è¿›åº¦
   - Lines 278-315: `displayWashProgress()` - æ´—è½¦è¿›åº¦
   - Lines 317-343: `displayComplete()` - å®Œæˆç•Œé¢
   - Lines 345-381: `displayError()` - é”™è¯¯ç•Œé¢

---

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°ç•Œé¢æ—¶çš„è§„èŒƒ

```cpp
void displayNewScreen() {
  if (!sysStatus.displayWorking) return;

  DisplayArea area = getDisplayArea();
  display.clearBuffer();
  // ä¸ç”»è¾¹æ¡†

  // æ ‡é¢˜ï¼ˆBold 10ptï¼ŒY=area.y+11ï¼‰
  display.setFont(u8g2_font_helvB10_tf);
  const char* title = "TITLE";
  int titleY = area.y + 11;
  display.drawStr(getCenterX(title), titleY, title);

  // å†…å®¹ï¼ˆæ ¹æ®éœ€è¦ä½¿ç”¨Regular 8ptæˆ–Bold 8ptï¼‰
  display.setFont(u8g2_font_helvR08_tf);
  // ... ç»˜åˆ¶å†…å®¹ ...

  // åº•éƒ¨ä¿¡æ¯ï¼ˆY=area.y+area.height-4ï¼‰
  display.setFont(u8g2_font_helvB08_tf);
  const char* bottom = "Bottom Text";
  display.drawStr(getCenterX(bottom), area.y + area.height - 4, bottom);

  display.sendBuffer();
}
```

### æ–‡å­—å±…ä¸­å·¥å…·
```cpp
// getCenterX() è‡ªåŠ¨è®¡ç®—æ–‡å­—å±…ä¸­çš„Xåæ ‡
int getCenterX(const char* text) {
  DisplayArea area = getDisplayArea();
  int textWidth = display.getStrWidth(text);
  return area.x + (area.width - textWidth) / 2;
}
```

---

## ğŸ¯ æ€»ç»“

### ä¼˜åŒ–åŸåˆ™
1. **ç®€æ´æ˜äº†** - ç§»é™¤ä¸å¿…è¦çš„è£…é¥°ï¼ˆè¾¹æ¡†ã€åˆ†éš”çº¿ï¼‰
2. **æ¸…æ™°æ˜“è¯»** - ä½¿ç”¨æ›´å¤§å­—ä½“å’Œåˆç†é—´è·
3. **çªå‡ºé‡ç‚¹** - é‡è¦ä¿¡æ¯ç”¨Boldå­—ä½“å’Œæ”¾å¤§å›¾æ ‡
4. **å……åˆ†åˆ©ç”¨** - 127Ã—53åƒç´ å…¨éƒ¨ç”¨äºå†…å®¹æ˜¾ç¤º

### ç»´æŠ¤å»ºè®®
- æ–°ç•Œé¢éµå¾ªæœ¬æ–‡æ¡£çš„å­—ä½“å’Œå¸ƒå±€è§„èŒƒ
- ä¿æŒæ ‡é¢˜ã€å†…å®¹ã€åº•éƒ¨ä¿¡æ¯çš„å‚ç›´ä½ç½®ä¸€è‡´
- æµ‹è¯•æ‰€æœ‰ç•Œé¢ç¡®ä¿æ–‡å­—ä¸ä¼šè¢«é®æŒ¡
- é•¿æ–‡æœ¬éœ€è¦è€ƒè™‘æ¢è¡Œæˆ–ç¼©çŸ­

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-11-05
**çŠ¶æ€**: âœ… æ‰€æœ‰ç•Œé¢ä¼˜åŒ–å®Œæˆï¼Œå·²éªŒè¯å¸ƒå±€
